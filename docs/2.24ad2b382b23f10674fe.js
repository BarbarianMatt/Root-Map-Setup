(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{UYdf:function(e,n,t){"use strict";t.r(n),t.d(n,"InputModule",function(){return R});var o=t("ofXK"),r=t("tyNb"),i=t("6xEa"),a=t("BJvs"),c=t("fXoL"),s=t("UPMW"),l=t("HDMR");function b(e,n){return d(e).slice(0,n)}function g(e,n){return e+n+"\r\n"}function d(e){return null==e&&console.trace(),e.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function u(e,n){return Array.from({length:n},(n,t)=>t+e)}function h(e,n,t,o,r){var i=a.q[o][n];return!(t.includes(n)||"t"!=e&&t.some(e=>i.adjacent.includes(e))||"t"==e&&!i.ruins||"t_m"==e&&(1!=i.slots||i.ruins)||"t_c"==e&&!i.river||"t_f"==e&&!i.river||!("t_r"!=e||(!r.alternativeTreetop||!i.edge&&i.adjacent.length>2)&&(r.alternativeTreetop||i.corner)))}function f(e,n,t){var o=["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"];if((o=o.filter(e=>!t.bannedClasses[e].banned)).length<1+(e.includes("G")?1:0)||e.length<Math.max(n+1,3))return"error";var r=[],i=JSON.parse(JSON.stringify(e));p(i,"G");for(var a=0;a<Math.max(n+1,3);a++){var c=b(i,1)[0];if("G"==c&&Math.random()<.4&&(c=b(i,1)[0]),r.push(c),i.splice(i.indexOf(c),1),"V"==c&&e.includes("G")&&i.push("G"),"G"==c||"V"==c){var s=b(o,1)[0];r.push(s),o.splice(o.indexOf(s),1)}}return r}function p(e,n){e.includes(n)&&e.splice(e.indexOf(n),1)}function m(e){return!!isNaN(Number(e))}let O=(()=>{class e{constructor(e){this.rootlogService=e}mapSetup(e){var n=Number(e.players),t=Number(e.bots),o=e.hirelings,r=Number(e.hirelingsNum),i=e.balanced,c=e.forcedPromoted?r:e.forcedDemoted?0:r+2-n-t;e.forcedPromoted&&e.forcedDemoted&&(o=!1);var l="",O=Object.keys(e.bannedMaps).filter(n=>!e.bannedMaps[n].banned);if(0===O.length||m(e.players)||m(e.bots)||m(e.maxLandmarks)||m(e.minLandmarks)||m(e.epDeckOdds)||0==n||Number(e.maxLandmarks)<Number(e.minLandmarks)||Number(e.epDeckOdds)>1)return"error";const v=b(O,1)[0];l=g(l,"Map: "+v);var M=Math.random()<=Number(e.epDeckOdds)?"E&P":"Standard";l=g(l,"Deck: "+M);var N=["R","R","R","R","F","F","F","F","M","M","M","M"];N=d(N);for(var k=!0;i&&k;){N=d(N),k=!1;for(var C=0;C<N.length;C++){var y=a.q[v][C+1].adjacent;if(v==s.RootMap.Mountain&&(y=y.concat(a.q[v][C+1].closedAdjacent)),y.some(e=>N[e-1]==N[C])){k=!0;break}}}var P="Clearings: "+N[0]+"1";for(C=1;C<N.length;C++)P+=", "+N[C]+(C+1).toString();l=g(l,P);var S="";l=g(l,"M: "+M+" Deck");var j=Number(e.maxLandmarks),x=Number(e.minLandmarks),w=(j+x)/2,Z=function(e,n){const{z0:t}=function(){const e=Math.random(),n=Math.random();return{z0:Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*n),z1:Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*n)}}();return t*n+e}(w+.0772,.557*w),_=b(["t","t_m","t_c","t_f","t_k","t_r"],Math.round(Math.max(Math.min(Z,j),x)));Z=Math.random(),"Lake"==v&&Z<.4&&!_.includes("t_f")&&e.ferryMapPriority&&(_[0]="t_f"),"Mountain"==v&&Z<.4&&!_.includes("t")&&e.towerMapPriority&&(_[0]="t");for(var F=!1,q=[],V=0;!F&&V<=1e5;){q=[],F=!0,_=d(_);var z=b(u(1,12),_.length);for(C=0;C<_.length;C++){var L=z[C];Z=Math.random(),"Mountain"==v&&Z<.2&&e.passLandmarkPriority&&(L=10),h(_[C],L,q,v,e)||(F=!1),q.push(L)}V+=1}V>=1e5&&console.log("looped too much landmark");var H=u(1,12).filter(e=>a.q[v][e].ruins),R=["b","b_s","b_w","b_r"],D="M:";if(H.length>0)for(D+=R[0]+"->"+H[0]+"/",C=1;C<H.length;C++)D+=R[C]+"->"+H[C]+"/";if(_.length>0){for(C=0;C<q.length;C++)D+=_[C]+"->"+q[C].toString()+"/","t_c"==_[C]?N[q[C]-1]=N[q[C]-1]+"FRM".replace(N[q[C]-1],""):"t_r"==_[C]?a.q[v][q[C]].slots=a.q[v][q[C]].slots+1:"t_k"==_[C]&&(N[q[C]-1].includes("F")&&(D+="Z%s/Z%s/Z%x/Z%h/"),N[q[C]-1].includes("R")&&(D+="Z%b/Z%b/Z%t/Z%t/"),N[q[C]-1].includes("M")&&(D+="Z%f/Z%f/Z%c/Z%c/"));S=g(S,D=D.slice(0,-1))}var B=["P","L","D","E","C","O","V","A","K","H","G"],G=["c","e","a","v","p","d","o","l"],I=["\xe5","\u1ea3","\u1ea5","\u1ea7","\u1ea9","\u0203"],E=b(G.filter(n=>!e.bannedBots[n].banned),t);for(C=0;C<E.length;C++)p(B,E[C].toUpperCase()),"v"==E[C]&&E.splice(C+1,0,b(I,1)[0]),D=E[C]+": "+this.rootlogService.getFactionProperName(E[C]),G.includes(E[C])&&(D+=" ("+b(a.n[E[C].toUpperCase()],1)+")"),l=g(l,D);var U=u(1,12).filter(e=>a.q[v][e].corner),T=0;if(E.includes("c")){var J=d(["b_s","b_r","b_w"]),$=b(U,1)[0];for(U.splice(U.indexOf($),1),T=$,D="c:t_k->"+$.toString()+"/w->"+$.toString(),C=1;C<13;C++)a.q[v][$].opposite!=C&&(D+="+"+C.toString());var A=a.q[v][$].adjacent;for(A.length<J.length&&(A=A.concat(Array(J.length-A.length).fill($))),C=0;C<J.length;C++)D+="/"+J[C]+"->"+A[C].toString(),a.q[v][A[C]].slots=a.q[v][A[C]].slots-1;S=g(S,D)}if(E.includes("e")&&($=3==U.length?a.q[v][u(1,12).filter(e=>a.q[v][e].corner&&!U.includes(e))[0]].opposite:b(U,1)[0],U.splice(U.indexOf($),1),a.q[v][$].slots=a.q[v][$].slots-1,S=g(S,"e:b+6w->"+$.toString())),E.includes("v")){var K=Object.keys(a.o[v]).reduce((e,n)=>e>(n.match(/\_/g)||[]).length?e:(n.match(/\_/g)||[]).length,0);S=g(S,"v:p->"+b(Object.keys(a.o[v]).filter(e=>(e.match(/\_/g)||[]).length==K),1)[0].toString())}if(E.includes("l")){for($=3==U.length?a.q[v][u(1,12).filter(e=>a.q[v][e].corner&&!U.includes(e))[0]].opposite:b(U,1)[0],U.splice(U.indexOf($),1),D="l:4w+b_"+N[$-1].toString()[0].toLowerCase()+"->"+$.toString(),C=0;C<a.q[v][$].adjacent.length;C++)D+="/w->"+a.q[v][$].adjacent[C].toString();a.q[v][$].slots=a.q[v][$].slots-1,S=g(S,D)}if(E.includes("o")){for(D="o:w->"+(ae=u(1,12).filter(e=>a.q[v][e].river&&e!=T))[0],C=1;C<ae.length;C++)D+="+"+ae[C];S=g(S,D)}if(E.includes("d")){for($=3==U.length?a.q[v][u(1,12).filter(e=>a.q[v][e].corner&&!U.includes(e))[0]].opposite:b(U,1)[0],U.splice(U.indexOf($),1),D="d:t->"+$.toString()+"/2w->"+$.toString(),C=0;C<a.q[v][$].adjacent.length;C++)D+="+"+a.q[v][$].adjacent[C].toString();S=g(S,D)}E.includes("p")&&(D="p:w->",D+=u(1,12).filter(e=>N[e-1].includes("F")&&e!=T).splice(-1)[0]+"+",D+=u(1,12).filter(e=>N[e-1].includes("M")&&e!=T).splice(-1)[0]+"+",S=g(S,D+=u(1,12).filter(e=>N[e-1].includes("R")&&e!=T).splice(-1)[0]));var X=e.contrastiveHirelings?["P","L","D","E","C","O","V","A","K","H","G"]:B,W=["B","N","R"].filter(n=>!e.bannedHirelings[Object(a.h)(n)].banned),Y=b(X.filter(n=>"G"!==n&&!e.bannedHirelings[Object(a.h)(n)].banned).concat(W),o?r:0),Q=[];for(C=0;C<Y.length;C++){var ee=Y[C];if(X.includes(ee)&&X.length-("V"==ee?2:1)<n+1&&!e.contrastiveHirelings){var ne=W.filter(e=>!Y.includes(e));if(0==ne.length)return"errorBannedNumsTooHigh";ee=b(ne,1)[0],Y[C]=ee,console.log(ee),console.log(Q)}p(X,ee),"V"==ee&&p(X,"G"),Q[C]=Object(a.h)(ee),l=g(l,Q[C]+": "+this.rootlogService.getFactionProperName(Q[C]).split(",")[C<c?0:1]+" "+(C<c?"\u25b2":"\u25bc"))}for(e.contrastiveHirelings||(B=X),C=0;C<Q.length&&C<c;C++){var te=Q[C];if(te==Object(a.h)("K")){var oe=b(u(1,12).filter(e=>a.q[v][e].slots>0&&e!=T),1)[0];S=g(S,Object(a.h)("K")+":b+2w->"+oe.toString()),a.q[v][oe].slots=a.q[v][oe].slots-1}if(te==Object(a.h)("B")&&(z=b(u(1,12).filter(e=>e!=T),2),S=g(S,Object(a.h)("B")+":w->"+z[0].toString()+"+"+z[1].toString())),te==Object(a.h)("N")){if(D="",(z=b(Object.keys(a.r[v]),2)).length>0){D+=Object(a.h)("N")+":w->"+z[0];for(var re=1;re<z.length;re++)D+="+"+z[re]}S=g(S,D)}if(te==Object(a.h)("P")){var ie=b(["R","F","M"],1)[0];z=b(u(1,12).filter(e=>N[e-1].includes(ie)&&e!=T),2),S=g(S,Object(a.h)("P")+":w->"+z[0].toString()+"+"+z[1].toString())}if(te==Object(a.h)("L")){for(D="",(ae=u(1,12).filter(e=>a.q[v][e].ruins&&e!=T)).length>0&&(D+=Object(a.h)("L")+":w->"+ae[0]),re=1;re<ae.length;re++)D+="+"+ae[re];S=g(S,D)}if(te==Object(a.h)("D")&&(oe=b(u(1,12).filter(e=>e!=T),1)[0],S=g(S,Object(a.h)("D")+":t+3w->"+oe.toString())),te==Object(a.h)("E")&&(oe=b(u(1,12).filter(e=>a.q[v][e].edge&&e!=T),1)[0],S=g(S,Object(a.h)("E")+":5w->"+oe.toString())),te==Object(a.h)("C")){var ae;if(D="",(ae=u(1,12).filter(e=>e!=T)).length>0)for(D+=Object(a.h)("C")+":w->"+ae[0],re=1;re<ae.length;re++)D+="+"+ae[re];S=g(S,D)}if(te==Object(a.h)("R")&&(oe=b(u(1,12).filter(e=>e!=T),1)[0],S=g(S,Object(a.h)("R")+":w->"+oe.toString())),te==Object(a.h)("H")){var ce=b(u(1,12).filter(e=>e!=T),1)[0],se=b(u(1,12).filter(e=>e!=T),1)[0];S=g(S,Object(a.h)("H")+":w->"+ce.toString()+"+"+se.toString())}if(te==Object(a.h)("O")&&(0==(z=b(u(1,12).filter(e=>a.q[v][e].edge&&a.q[v][e].river&&e!=T),1)).length&&(z=b(u(1,12).filter(e=>a.q[v][e].river&&e!=T),1)),oe=z[0],S=g(S,Object(a.h)("O")+":w->"+oe.toString())),te==Object(a.h)("V")&&(oe=b(Object.keys(a.o[v]),1)[0],S=g(S,Object(a.h)("V")+":w->"+oe.toString())),te==Object(a.h)("A")){var le=b(["R","F","M"],1)[0],be=b(["R","F","M"],1)[0];ce=b(u(1,12).filter(e=>N[e-1].includes(le)&&e!=T),1)[0],se=b(u(1,12).filter(e=>N[e-1].includes(be)&&e!=T),1)[0],S=g(S,Object(a.h)("A")+":w->"+ce.toString()+"+"+se.toString())}}var ge=["D","E","C","K","H"];B=B.filter(n=>!e.bannedFactions[n].banned);for(var de=!1,ue=0,he=ge;!de&&ue<=1e5;){if(de=!0,"error"==(he=f(B,n,e)))return"error";((fe=ge.filter(e=>he.includes(e)||E.includes(e.toLowerCase())).length)<1||2==n&&fe<3)&&(de=!1),ue+=1}ue>=1e5&&console.log("looped too much finding faction");var fe=ge.filter(e=>he.includes(e)||E.includes(e.toLowerCase())).length;for(C=0;C<he.length;C++){if(D=he[C]+": "+this.rootlogService.getFactionProperName(he[C]),fe<=1&&(C==he.length-3&&("V"==he[C]||"G"==he[C])&&ge.includes(he[C+2])||C==he.length-2&&!ge.includes(he[C])&&!["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(he[C])&&(ge.includes(he[C+1])||["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(he[C+1]))||C==he.length-1&&!ge.includes(he[C])&&!["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(he[C]))&&(D+=" \ud83d\udd12"),"K"==he[C]){var pe=Object.keys(a.o[v]),me="";if((z=b(["t","t","t","t","t_k","t_k","t_k","t_k","t_m","t_m","t_m","t_m"],pe.length)).length>0)for(me+="K:"+z[0]+"->"+pe[0],re=1;re<z.length;re++)me+="/"+z[re]+"->"+pe[re];S=g(S,me)}l=g(l,D)}return l+=S,(V>=1e5||ue>=1e5)&&(l="error"),console.log(l),l}}return e.\u0275fac=function(n){return new(n||e)(c.Sb(l.a))},e.\u0275prov=c.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v=(()=>{class e{constructor(){}setItem(e,n){localStorage.setItem(e,JSON.stringify(n))}getItem(e){return JSON.parse(localStorage.getItem(e))}removeItem(e){localStorage.removeItem(e)}clear(){localStorage.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=c.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=t("/t3+"),N=t("kmnG"),k=t("qFsG"),C=t("3Pt+"),y=t("bSwM"),P=t("bTqV");function S(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedFactions[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedFactions[e].banned),c.zb(1),c.uc(" ",t.options.bannedFactions[e].properName,"")}}function j(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedMaps[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedMaps[e].banned),c.zb(1),c.uc(" ",t.options.bannedMaps[e].properName,"")}}function x(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedBots[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedBots[e].banned),c.zb(1),c.uc(" ",t.options.bannedBots[e].properName,"")}}function w(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedClasses[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedClasses[e].banned),c.zb(1),c.uc(" ",t.options.bannedClasses[e].properName,"")}}function Z(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedHirelings[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedHirelings[e].banned),c.zb(1),c.uc(" ",t.options.bannedHirelings[e].properName," ")}}const _=function(){return{standalone:!0}};function F(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div"),c.Ob(1,"div",13),c.Ob(2,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedFactions")}),c.sc(3,"Banned Factions"),c.Nb(),c.Nb(),c.Ob(4,"div",8),c.rc(5,S,3,2,"div",14),c.Nb(),c.Ob(6,"div",13),c.Ob(7,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedMaps")}),c.sc(8,"Banned Maps"),c.Nb(),c.Nb(),c.Ob(9,"div",8),c.rc(10,j,3,2,"div",14),c.Nb(),c.Ob(11,"div",13),c.Ob(12,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedBots")}),c.sc(13,"Banned Bots"),c.Nb(),c.Nb(),c.Ob(14,"div",8),c.rc(15,x,3,2,"div",14),c.Nb(),c.Ob(16,"div",13),c.Ob(17,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedClasses")}),c.sc(18,"Banned Vagabond Classes"),c.Nb(),c.Nb(),c.Ob(19,"div",8),c.rc(20,w,3,2,"div",14),c.Nb(),c.Ob(21,"div",13),c.Ob(22,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedHirelings")}),c.sc(23,"Banned Hirelings"),c.Nb(),c.Nb(),c.Ob(24,"div",8),c.rc(25,Z,3,2,"div",14),c.Nb(),c.Ob(26,"div",13),c.Ob(27,"h1"),c.sc(28,"Other"),c.Nb(),c.Nb(),c.Ob(29,"div",8),c.Ob(30,"div",9),c.Ob(31,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.forcedDemoted=n}),c.sc(32," Force Demote Hirelings"),c.Nb(),c.Nb(),c.Ob(33,"div",9),c.Ob(34,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.forcedPromoted=n}),c.sc(35," Force Promote Hirelings"),c.Nb(),c.Nb(),c.Ob(36,"div",9),c.Ob(37,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.contrastiveHirelings=n}),c.sc(38," Remove Hireling Exclusivity"),c.Nb(),c.Nb(),c.Ob(39,"div",9),c.Ob(40,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.alternativeTreetop=n}),c.sc(41," Alternative Treetop Setup"),c.Nb(),c.Nb(),c.Ob(42,"div",9),c.Ob(43,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.ferryMapPriority=n}),c.sc(44," Ferry Priority on Lake"),c.Nb(),c.Nb(),c.Ob(45,"div",9),c.Ob(46,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.towerMapPriority=n}),c.sc(47," Tower Priority on Mountain"),c.Nb(),c.Nb(),c.Ob(48,"div",9),c.Ob(49,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.passLandmarkPriority=n}),c.sc(50," Pass Priority on Mountain"),c.Nb(),c.Nb(),c.Nb(),c.Ob(51,"div",3),c.Ob(52,"div",4),c.Ob(53,"mat-form-field",5),c.Ob(54,"mat-label"),c.sc(55,"Max Landmarks"),c.Nb(),c.Ob(56,"textarea",15),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.maxLandmarks=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(57,"div",3),c.Ob(58,"div",4),c.Ob(59,"mat-form-field",5),c.Ob(60,"mat-label"),c.sc(61,"Min Landmarks"),c.Nb(),c.Ob(62,"textarea",16),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.minLandmarks=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(63,"div",3),c.Ob(64,"div",4),c.Ob(65,"mat-form-field",5),c.Ob(66,"mat-label"),c.sc(67,"Hirelings"),c.Nb(),c.Ob(68,"textarea",17),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.hirelingsNum=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(69,"div",3),c.Ob(70,"div",4),c.Ob(71,"mat-form-field",5),c.Ob(72,"mat-label"),c.sc(73,"Exiles and Partisans Deck Odds"),c.Nb(),c.Ob(74,"textarea",18),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.epDeckOdds=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=c.Zb();c.zb(5),c.ec("ngForOf",e.keys(e.getFactions())),c.zb(5),c.ec("ngForOf",e.keys(e.getMaps())),c.zb(5),c.ec("ngForOf",e.keys(e.getBots())),c.zb(5),c.ec("ngForOf",e.keys(e.getClasses())),c.zb(5),c.ec("ngForOf",e.keys(e.getHirelings())),c.zb(6),c.ec("ngModel",e.options.forcedDemoted),c.zb(3),c.ec("ngModel",e.options.forcedPromoted),c.zb(3),c.ec("ngModel",e.options.contrastiveHirelings),c.zb(3),c.ec("ngModel",e.options.alternativeTreetop),c.zb(3),c.ec("ngModel",e.options.ferryMapPriority),c.zb(3),c.ec("ngModel",e.options.towerMapPriority),c.zb(3),c.ec("ngModel",e.options.passLandmarkPriority),c.zb(7),c.ec("ngModel",e.options.maxLandmarks)("ngModelOptions",c.fc(20,_)),c.zb(6),c.ec("ngModel",e.options.minLandmarks)("ngModelOptions",c.fc(21,_)),c.zb(6),c.ec("ngModel",e.options.hirelingsNum)("ngModelOptions",c.fc(22,_)),c.zb(6),c.ec("ngModel",e.options.epDeckOdds)("ngModelOptions",c.fc(23,_))}}const q=function(){return["/"]},V=function(){return["/full-game"]},z=[{path:"",component:(()=>{class e{constructor(e,n,t){this.mapService=e,this.rootlogService=n,this.localStorageService=t,this.options=this.localGet(this.default()),this.game=this.mapService.mapSetup(this.options),this.validRootlog=!0,this.gameUrl="",this.validRootlogUrl=!1}localGet(e){const n=e;for(const[o,r]of Object.entries(e)){var t=this.localStorageService.getItem(o);null!==t&&"undefined"!==t&&""!==t&&(n[o]=t)}return n}reset(){this.options=this.default(),this.options.reset=!1,this.gameChange()}True(){return!0}default(){return{players:4,bots:0,extra:!1,reset:!1,hirelings:!1,balanced:!1,bannedFactions:this.getFactions(),bannedBots:this.getBots(),bannedClasses:this.getClasses(),bannedHirelings:this.getHirelings(),bannedMaps:this.getMaps(),maxLandmarks:2,minLandmarks:0,epDeckOdds:.9,hirelingsNum:3,forcedDemoted:!1,forcedPromoted:!1,contrastiveHirelings:!1,alternativeTreetop:!1,ferryMapPriority:!1,towerMapPriority:!1,passLandmarkPriority:!1}}localSet(e){for(const[n,t]of Object.entries(e))this.localStorageService.setItem(n,t)}gameChange(){this.localSet(this.options),this.game=this.mapService.mapSetup(this.options)}async gameUrlChange(){try{const e=await this.rootlogService.getGameStringFromURLPromise(this.gameUrl);this.validRootlogUrl=this.rootlogService.isValidGame(e)}catch(e){this.validRootlogUrl=!1}}keys(e){return Object.keys(e)}getMaps(){var e={};for(const[t,o]of Object.entries(a.e)){var n={banned:!1};n.properName=o,e[t]=n}return e}getFactions(){var e={};for(const[t,o]of Object.entries(a.c)){var n={};n.name=o,n.banned=!1,n.properName=this.rootlogService.getFactionProperName(t),e[t]=n}return e}getBots(){var e={};for(const[t,o]of Object.entries(a.a)){var n={};n.name=o,n.banned=!1,n.properName=this.rootlogService.getFactionProperName(t),e[t]=n}return e}getClasses(){var e={};for(const[t,o]of Object.entries(a.b)){var n={};n.name=o,n.banned=!1,n.properName=this.rootlogService.getFactionProperName(t),e[t]=n}return e}all(e){var n=0;for(const[o,r]of Object.entries(this.options[e]))n+=this.options[e][o].banned?1:0;var t=n<=Object.keys(this.options[e]).length/2;for(const[o,r]of Object.entries(this.options[e]))this.options[e][o].banned=t;this.gameChange()}getHirelings(){var e={};for(const[t,o]of Object.entries(a.d)){var n={};n.name=o,n.banned=!1,n.properName=this.rootlogService.getFactionProperName(t).split(",")[0],e[t]=n}return e}getURLParams(){const e={};return this.game&&(e.game=this.getEncodedGame()),this.gameUrl&&(e.gameUrl=this.gameUrl),e}getEncodedGame(){return this.game?Object(i.compressToEncodedURIComponent)(this.game):""}}return e.\u0275fac=function(n){return new(n||e)(c.Jb(O),c.Jb(l.a),c.Jb(v))},e.\u0275cmp=c.Db({type:e,selectors:[["app-input"]],decls:31,vars:16,consts:[["color","primary",3,"routerLink"],[3,"click"],[1,"container"],[1,"row"],[1,"col"],["appearance","outline","color","accent"],["matInput","","placeholder","Enter # of players here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter # of bots here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[1,"row-check"],[1,"row-col"],[3,"ngModel","change","ngModelChange"],[4,"ngIf"],["mat-flat-button","","color","primary",3,"routerLink","queryParams","disabled"],[1,"center"],["class","row-col",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter max # of landmarks here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter min # of landmarks here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter # of Hirelings here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter Exiles and Partisans Deck Odds here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"]],template:function(e,n){1&e&&(c.Ob(0,"mat-toolbar",0),c.Ob(1,"span",1),c.Vb("click",function(){return n.reset()}),c.sc(2,"Root Map Setup"),c.Nb(),c.Nb(),c.Ob(3,"div",2),c.Ob(4,"div",3),c.Ob(5,"div",4),c.Ob(6,"mat-form-field",5),c.Ob(7,"mat-label"),c.sc(8,"Players"),c.Nb(),c.Ob(9,"textarea",6),c.Vb("keyup",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.players=e}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(10,"div",3),c.Ob(11,"div",4),c.Ob(12,"mat-form-field",5),c.Ob(13,"mat-label"),c.sc(14,"Bots"),c.Nb(),c.Ob(15,"textarea",7),c.Vb("keyup",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.bots=e}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(16,"div",8),c.Ob(17,"div",9),c.Ob(18,"mat-checkbox",10),c.Vb("change",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.hirelings=e}),c.sc(19," Hirelings?"),c.Nb(),c.Nb(),c.Ob(20,"div",9),c.Ob(21,"mat-checkbox",10),c.Vb("change",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.balanced=e}),c.sc(22," Balanced Clearings?"),c.Nb(),c.Nb(),c.Ob(23,"div",9),c.Ob(24,"mat-checkbox",10),c.Vb("change",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.extra=e}),c.sc(25," Extra Settings?"),c.Nb(),c.Nb(),c.Nb(),c.rc(26,F,75,24,"div",11),c.Ob(27,"div",3),c.Ob(28,"div",4),c.Ob(29,"button",12),c.sc(30,"Generate Map"),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.ec("routerLink",c.fc(12,q)),c.zb(9),c.ec("ngModel",n.options.players)("ngModelOptions",c.fc(13,_)),c.zb(6),c.ec("ngModel",n.options.bots)("ngModelOptions",c.fc(14,_)),c.zb(3),c.ec("ngModel",n.options.hirelings),c.zb(3),c.ec("ngModel",n.options.balanced),c.zb(3),c.ec("ngModel",n.options.extra),c.zb(2),c.ec("ngIf",n.options.extra),c.zb(3),c.ec("routerLink",c.fc(15,V))("queryParams",n.getURLParams())("disabled",!n.validRootlog&&!n.validRootlogUrl))},directives:[M.a,r.c,N.b,N.e,k.a,C.b,C.h,C.j,y.a,o.l,P.a,o.k],styles:[".container[_ngcontent-%COMP%]{padding:10px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .row-check[_ngcontent-%COMP%]{margin-left:20%;margin-right:20%}.container[_ngcontent-%COMP%]   .row-check[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.container[_ngcontent-%COMP%]   .row-check[_ngcontent-%COMP%]   .row-col[_ngcontent-%COMP%]{min-width:200px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:20px}button[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%], .row-check[_ngcontent-%COMP%]{margin-top:20px}textarea[_ngcontent-%COMP%]{height:20px;max-height:20px}"]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(n){return new(n||e)},imports:[[r.d.forChild(z)],r.d]}),e})();var H=t("d2mR");let R=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(n){return new(n||e)},imports:[[o.c,C.d,L,H.a]]}),e})()}}]);