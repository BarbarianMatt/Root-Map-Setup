(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{UYdf:function(e,n,t){"use strict";t.r(n),t.d(n,"InputModule",function(){return D});var o=t("ofXK"),r=t("tyNb"),i=t("6xEa"),a=t("BJvs"),c=t("fXoL"),s=t("UPMW"),l=t("HDMR");function b(e,n){return g(e).slice(0,n)}function d(e,n){return e+n+"\r\n"}function g(e){return null==e&&console.trace(),e.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function u(e,n){return Array.from({length:n},(n,t)=>t+e)}function p(e,n,t,o,r){var i=a.r[o][n];return!(t.includes(n)||"t"!=e&&t.some(e=>i.adjacent.includes(e))||"t"==e&&!i.ruins||"t_m"==e&&(1!=i.slots||i.ruins)||"t_c"==e&&!i.river||"t_f"==e&&!i.river||!("t_r"!=e||(!r.alternativeTreetop||!i.edge&&i.adjacent.length>2)&&(r.alternativeTreetop||i.corner)))}function f(e,n,t){var o=["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"];if((o=o.filter(e=>!t.bannedClasses[e].banned)).length<1+(e.includes("G")?1:0)||e.length<Math.max(n+1,3))return"error";var r=[],i=JSON.parse(JSON.stringify(e));h(i,"G");for(var a=0;a<Math.max(n+1,3);a++){var c=b(i,1)[0];if("G"==c&&Math.random()<.4&&(c=b(i,1)[0]),r.push(c),i.splice(i.indexOf(c),1),"V"==c&&e.includes("G")&&i.push("G"),"G"==c||"V"==c){var s=b(o,1)[0];r.push(s),o.splice(o.indexOf(s),1)}}return r}function h(e,n){return!!e.includes(n)&&(e.splice(e.indexOf(n),1),!0)}function m(e){return!!isNaN(Number(e))}let O=(()=>{class e{constructor(e){this.rootlogService=e}mapSetup(e){var n=Number(e.players),t=Number(e.bots),o=e.hirelings,r=Number(e.hirelingsNum),i=e.balanced,c=e.forcedPromoted?r:e.forcedDemoted?0:r+2-n-t;e.forcedPromoted&&e.forcedDemoted&&(o=!1);var l="",O=Object.keys(e.bannedMaps).filter(n=>!e.bannedMaps[n].banned);if(0===O.length||m(e.players)||m(e.bots)||m(e.maxLandmarks)||m(e.minLandmarks)||m(e.epDeckOdds)||0==n||Number(e.maxLandmarks)<Number(e.minLandmarks)||Number(e.epDeckOdds)>1)return"error";const v=b(O,1)[0];l=d(l,"Map: "+v);var M=Math.random()<=Number(e.epDeckOdds)?"E&P":"Standard";l=d(l,"Deck: "+M);var N=["R","R","R","R","F","F","F","F","M","M","M","M"];N=g(N);for(var k=!0;i&&k;){N=g(N),k=!1;for(var C=0;C<N.length;C++){var y=a.r[v][C+1].adjacent;if(v==s.RootMap.Mountain&&(y=y.concat(a.r[v][C+1].closedAdjacent)),y.some(e=>N[e-1]==N[C])){k=!0;break}}}var P="Clearings: "+N[0]+"1";for(C=1;C<N.length;C++)P+=", "+N[C]+(C+1).toString();l=d(l,P);var S="";l=d(l,"M: "+M+" Deck");var j=Object.keys(e.bannedLandmarks).filter(n=>!e.bannedLandmarks[n].banned),x=Number(e.maxLandmarks),w=Number(e.minLandmarks),Z=(x+w)/2,L=function(e,n){const{z0:t}=function(){const e=Math.random(),n=Math.random();return{z0:Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*n),z1:Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*n)}}();return t*n+e}(Z+.0772,.557*Z),_=Math.round(Math.max(Math.min(L,x),w)),F=b(j,_);L=Math.random(),"Lake"==v&&L<.4&&!F.includes("t_f")&&e.ferryMapPriority&&j.includes("t_f")&&(F[0]="t_f"),"Mountain"==v&&L<.4&&!F.includes("t")&&e.towerMapPriority&&j.includes("t")&&(F[0]="t");for(var z=!1,V=[],R=0;!z&&R<=1e5&&_>0;){V=[],z=!0,F=g(F);var H=b(u(1,12),F.length);for(C=0;C<F.length;C++){var B=H[C];L=Math.random(),"Mountain"==v&&L<.2&&e.passLandmarkPriority&&(B=10),p(F[C],B,V,v,e)||(z=!1),V.push(B)}R+=1}R>=1e5&&console.log("looped too much landmark");var D=u(1,12).filter(e=>a.r[v][e].ruins),I=["b","b_s","b_w","b_r"],E="M:";if(D.length>0)for(E+=I[0]+"->"+D[0]+"/",C=1;C<D.length;C++)E+=I[C]+"->"+D[C]+"/";if(F.length>0)for(C=0;C<V.length;C++)E+=F[C]+"->"+V[C].toString()+"/","t_c"==F[C]?N[V[C]-1]=N[V[C]-1]+"FRM".replace(N[V[C]-1],""):"t_r"==F[C]?a.r[v][V[C]].slots=a.r[v][V[C]].slots+1:"t_k"==F[C]&&(N[V[C]-1].includes("F")&&(E+="Z%s/Z%s/Z%x/Z%h/"),N[V[C]-1].includes("R")&&(E+="Z%f/Z%f/Z%c/Z%c/"),N[V[C]-1].includes("M")&&(E+="Z%b/Z%b/Z%t/Z%t/"));S=d(S,E=E.slice(0,-1));var G=function(e){var n=Object.keys(a.c);return e.outsiders&&(n=n.concat(Object.keys(a.s))),n}(e),U=["c","e","a","v","p","d","o","l"],$=["\xe5","\u1ea3","\u1ea5","\u1ea7","\u1ea9","\u0203"],J=b(U.filter(n=>!e.bannedBots[n].banned),t);for(C=0;C<J.length;C++)h(G,J[C].toUpperCase()),"v"==J[C]&&J.splice(C+1,0,b($,1)[0]),E=J[C]+": "+this.rootlogService.getFactionProperName(J[C]),U.includes(J[C])&&(E+=" ("+b(a.o[J[C].toUpperCase()],1)+")"),l=d(l,E);var T=u(1,12).filter(e=>a.r[v][e].corner),A=0;if(J.includes("c")){var K=g(["b_s","b_r","b_w"]),q=b(T,1)[0];for(T.splice(T.indexOf(q),1),A=q,E="c:t_k->"+q.toString()+"/w->"+q.toString(),C=1;C<13;C++)a.r[v][q].opposite!=C&&(E+="+"+C.toString());var X=a.r[v][q].adjacent;for(X.length<K.length&&(X=X.concat(Array(K.length-X.length).fill(q))),C=0;C<K.length;C++)E+="/"+K[C]+"->"+X[C].toString(),a.r[v][X[C]].slots=a.r[v][X[C]].slots-1;S=d(S,E)}if(J.includes("e")&&(q=3==T.length?a.r[v][u(1,12).filter(e=>a.r[v][e].corner&&!T.includes(e))[0]].opposite:b(T,1)[0],T.splice(T.indexOf(q),1),a.r[v][q].slots=a.r[v][q].slots-1,S=d(S,"e:b+6w->"+q.toString())),J.includes("v")){var W=Object.keys(a.p[v]).reduce((e,n)=>e>(n.match(/\_/g)||[]).length?e:(n.match(/\_/g)||[]).length,0);S=d(S,"v:p->"+b(Object.keys(a.p[v]).filter(e=>(e.match(/\_/g)||[]).length==W),1)[0].toString())}if(J.includes("l")){for(q=3==T.length?a.r[v][u(1,12).filter(e=>a.r[v][e].corner&&!T.includes(e))[0]].opposite:b(T,1)[0],T.splice(T.indexOf(q),1),E="l:4w+b_"+N[q-1].toString()[0].toLowerCase()+"->"+q.toString(),C=0;C<a.r[v][q].adjacent.length;C++)E+="/w->"+a.r[v][q].adjacent[C].toString();a.r[v][q].slots=a.r[v][q].slots-1,S=d(S,E)}if(J.includes("o")){for(E="o:w->"+(ce=u(1,12).filter(e=>a.r[v][e].river&&e!=A))[0],C=1;C<ce.length;C++)E+="+"+ce[C];S=d(S,E)}if(J.includes("d")){for(q=3==T.length?a.r[v][u(1,12).filter(e=>a.r[v][e].corner&&!T.includes(e))[0]].opposite:b(T,1)[0],T.splice(T.indexOf(q),1),E="d:t->"+q.toString()+"/2w->"+q.toString(),C=0;C<a.r[v][q].adjacent.length;C++)E+="+"+a.r[v][q].adjacent[C].toString();S=d(S,E)}J.includes("p")&&(E="p:w->",E+=u(1,12).filter(e=>N[e-1].includes("F")&&e!=A).splice(-1)[0]+"+",E+=u(1,12).filter(e=>N[e-1].includes("M")&&e!=A).splice(-1)[0]+"+",S=d(S,E+=u(1,12).filter(e=>N[e-1].includes("R")&&e!=A).splice(-1)[0]));var Y=["P","L","D","E","C","O","V","A","K","H"].filter(e=>!J.includes(e.toLowerCase())),Q=["B","N","R"].filter(n=>!e.bannedHirelings[Object(a.i)(n)].banned),ee=b(Y.filter(n=>!e.bannedHirelings[Object(a.i)(n)].banned).concat(Q),o?r:0),ne=[];for(C=0;C<ee.length;C++){var te=ee[C];h(Y,te),"V"==te&&h(Y,"G"),e.contrastiveHirelings||h(G,te)||Q.includes(te)||console.log("error: tried to remove "+te+" due to hireling, but it is not there in factions"),ne[C]=Object(a.i)(te),l=d(l,ne[C]+": "+this.rootlogService.getFactionProperName(ne[C]).split(",")[C<c?0:1]+" "+(C<c?"\u25b2":"\u25bc"))}for(C=0;C<ne.length&&C<c;C++){var oe=ne[C];if(oe==Object(a.i)("K")){var re=b(u(1,12).filter(e=>a.r[v][e].slots>0&&e!=A),1)[0];S=d(S,Object(a.i)("K")+":b+2w->"+re.toString()),a.r[v][re].slots=a.r[v][re].slots-1}if(oe==Object(a.i)("B")&&(H=b(u(1,12).filter(e=>e!=A),2),S=d(S,Object(a.i)("B")+":w->"+H[0].toString()+"+"+H[1].toString())),oe==Object(a.i)("N")){if(E="",(H=b(Object.keys(a.t[v]),2)).length>0){E+=Object(a.i)("N")+":w->"+H[0];for(var ie=1;ie<H.length;ie++)E+="+"+H[ie]}S=d(S,E)}if(oe==Object(a.i)("P")){var ae=b(["R","F","M"],1)[0];H=b(u(1,12).filter(e=>N[e-1].includes(ae)&&e!=A),2),S=d(S,Object(a.i)("P")+":w->"+H[0].toString()+"+"+H[1].toString())}if(oe==Object(a.i)("L")){for(E="",(ce=u(1,12).filter(e=>a.r[v][e].ruins&&e!=A)).length>0&&(E+=Object(a.i)("L")+":w->"+ce[0]),ie=1;ie<ce.length;ie++)E+="+"+ce[ie];S=d(S,E)}if(oe==Object(a.i)("D")&&(re=b(u(1,12).filter(e=>e!=A),1)[0],S=d(S,Object(a.i)("D")+":t+3w->"+re.toString())),oe==Object(a.i)("E")&&(re=b(u(1,12).filter(e=>a.r[v][e].edge&&e!=A),1)[0],S=d(S,Object(a.i)("E")+":5w->"+re.toString())),oe==Object(a.i)("C")){var ce;if(E="",(ce=u(1,12).filter(e=>e!=A)).length>0)for(E+=Object(a.i)("C")+":w->"+ce[0],ie=1;ie<ce.length;ie++)E+="+"+ce[ie];S=d(S,E)}if(oe==Object(a.i)("R")&&(re=b(u(1,12).filter(e=>e!=A),1)[0],S=d(S,Object(a.i)("R")+":w->"+re.toString())),oe==Object(a.i)("H")){var se=b(u(1,12).filter(e=>e!=A),1)[0],le=b(u(1,12).filter(e=>e!=A),1)[0];S=d(S,Object(a.i)("H")+":w->"+se.toString()+"+"+le.toString())}if(oe==Object(a.i)("O")&&(0==(H=b(u(1,12).filter(e=>a.r[v][e].edge&&a.r[v][e].river&&e!=A),1)).length&&(H=b(u(1,12).filter(e=>a.r[v][e].river&&e!=A),1)),re=H[0],S=d(S,Object(a.i)("O")+":w->"+re.toString())),oe==Object(a.i)("V")&&(re=b(Object.keys(a.p[v]),1)[0],S=d(S,Object(a.i)("V")+":w->"+re.toString())),oe==Object(a.i)("A")){var be=b(["R","F","M"],1)[0],de=b(["R","F","M"],1)[0];se=b(u(1,12).filter(e=>N[e-1].includes(be)&&e!=A),1)[0],le=b(u(1,12).filter(e=>N[e-1].includes(de)&&e!=A),1)[0],S=d(S,Object(a.i)("A")+":w->"+se.toString()+"+"+le.toString())}}var ge=["D","E","C","K","H"];ge=e.players>3?ge.concat("N"):ge,G=G.filter(n=>!e.bannedFactions[n].banned);for(var ue=!1,pe=0,fe=ge;!ue&&pe<=1e5;){if(ue=!0,"error"==(fe=f(G,n,e)))return"error";((he=ge.filter(e=>fe.includes(e)||J.includes(e.toLowerCase())).length)<1||2==n&&he<3)&&(ue=!1),pe+=1}pe>=1e5&&console.log("looped too much finding faction");var he=ge.filter(e=>fe.includes(e)||J.includes(e.toLowerCase())).length;for(C=0;C<fe.length;C++){if(E=fe[C]+": "+this.rootlogService.getFactionProperName(fe[C]),he<=1&&e.looseLock?(C==fe.length-3&&("V"==fe[C]||"G"==fe[C])&&ge.includes(fe[C+2])||C==fe.length-2&&!ge.includes(fe[C])&&!["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(fe[C])&&(ge.includes(fe[C+1])||["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(fe[C+1]))||C==fe.length-1&&!ge.includes(fe[C])&&!["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(fe[C]))&&(E+=" \ud83d\udd12"):e.looseLock||(C==fe.length-2&&!ge.includes(fe[C])&&!["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(fe[C])&&["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(fe[C+1])||C==fe.length-1&&!ge.includes(fe[C])&&!["\u1ea0","\xc5","\xc4","\u1ea2","\u1e00","\u1ea4","\u1ea6","\u1ea8","\u0202"].includes(fe[C]))&&(E+=" \ud83d\udd12"),"K"==fe[C]){var me=Object.keys(a.p[v]),Oe="";if((H=b(["t","t","t","t","t_k","t_k","t_k","t_k","t_m","t_m","t_m","t_m"],me.length)).length>0)for(Oe+="K:"+H[0]+"->"+me[0],ie=1;ie<H.length;ie++)Oe+="/"+H[ie]+"->"+me[ie];S=d(S,Oe)}l=d(l,E)}return l+=S,(R>=1e5||pe>=1e5)&&(l="error"),l}}return e.\u0275fac=function(n){return new(n||e)(c.Sb(l.a))},e.\u0275prov=c.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v=(()=>{class e{constructor(){}setItem(e,n){localStorage.setItem(e,JSON.stringify(n))}getItem(e){return JSON.parse(localStorage.getItem(e))}removeItem(e){localStorage.removeItem(e)}clear(){localStorage.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=c.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=t("/t3+"),N=t("kmnG"),k=t("qFsG"),C=t("3Pt+"),y=t("bSwM"),P=t("bTqV");function S(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedFactions[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedFactions[e].banned),c.zb(1),c.uc(" ",t.options.bannedFactions[e].properName,"")}}function j(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedMaps[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedMaps[e].banned),c.zb(1),c.uc(" ",t.options.bannedMaps[e].properName,"")}}function x(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedLandmarks[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedLandmarks[e].banned),c.zb(1),c.uc(" ",t.options.bannedLandmarks[e].properName,"")}}function w(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedBots[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedBots[e].banned),c.zb(1),c.uc(" ",t.options.bannedBots[e].properName,"")}}function Z(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedClasses[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedClasses[e].banned),c.zb(1),c.uc(" ",t.options.bannedClasses[e].properName,"")}}function L(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div",9),c.Ob(1,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb(2).gameChange()})("ngModelChange",function(t){c.lc(e);const o=n.$implicit;return c.Zb(2).options.bannedHirelings[o].banned=t}),c.sc(2),c.Nb(),c.Nb()}if(2&e){const e=n.$implicit,t=c.Zb(2);c.zb(1),c.ec("ngModel",t.options.bannedHirelings[e].banned),c.zb(1),c.uc(" ",t.options.bannedHirelings[e].properName," ")}}const _=function(){return{standalone:!0}};function F(e,n){if(1&e){const e=c.Pb();c.Ob(0,"div"),c.Ob(1,"div",13),c.Ob(2,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedFactions")}),c.sc(3,"Banned Factions"),c.Nb(),c.Nb(),c.Ob(4,"div",8),c.rc(5,S,3,2,"div",14),c.Nb(),c.Ob(6,"div",13),c.Ob(7,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedMaps")}),c.sc(8,"Banned Maps"),c.Nb(),c.Nb(),c.Ob(9,"div",8),c.rc(10,j,3,2,"div",14),c.Nb(),c.Ob(11,"div",13),c.Ob(12,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedLandmarks")}),c.sc(13,"Banned Landmarks"),c.Nb(),c.Nb(),c.Ob(14,"div",8),c.rc(15,x,3,2,"div",14),c.Nb(),c.Ob(16,"div",13),c.Ob(17,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedBots")}),c.sc(18,"Banned Bots"),c.Nb(),c.Nb(),c.Ob(19,"div",8),c.rc(20,w,3,2,"div",14),c.Nb(),c.Ob(21,"div",13),c.Ob(22,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedClasses")}),c.sc(23,"Banned Vagabond Classes"),c.Nb(),c.Nb(),c.Ob(24,"div",8),c.rc(25,Z,3,2,"div",14),c.Nb(),c.Ob(26,"div",13),c.Ob(27,"h1",1),c.Vb("click",function(){return c.lc(e),c.Zb().all("bannedHirelings")}),c.sc(28,"Banned Hirelings"),c.Nb(),c.Nb(),c.Ob(29,"div",8),c.rc(30,L,3,2,"div",14),c.Nb(),c.Ob(31,"div",13),c.Ob(32,"h1"),c.sc(33,"Other"),c.Nb(),c.Nb(),c.Ob(34,"div",8),c.Ob(35,"div",9),c.Ob(36,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.forcedDemoted=n}),c.sc(37," Force Demote Hirelings"),c.Nb(),c.Nb(),c.Ob(38,"div",9),c.Ob(39,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.forcedPromoted=n}),c.sc(40," Force Promote Hirelings"),c.Nb(),c.Nb(),c.Ob(41,"div",9),c.Ob(42,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.contrastiveHirelings=n}),c.sc(43," Remove Hireling Exclusivity"),c.Nb(),c.Nb(),c.Ob(44,"div",9),c.Ob(45,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.alternativeTreetop=n}),c.sc(46," Alternative Treetop Setup"),c.Nb(),c.Nb(),c.Ob(47,"div",9),c.Ob(48,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.ferryMapPriority=n}),c.sc(49," Ferry Priority on Lake"),c.Nb(),c.Nb(),c.Ob(50,"div",9),c.Ob(51,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.towerMapPriority=n}),c.sc(52," Tower Priority on Mountain"),c.Nb(),c.Nb(),c.Ob(53,"div",9),c.Ob(54,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.passLandmarkPriority=n}),c.sc(55," Pass Priority on Mountain"),c.Nb(),c.Nb(),c.Ob(56,"div",9),c.Ob(57,"mat-checkbox",10),c.Vb("change",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.looseLock=n}),c.sc(58," Loosen Lock Restrictions"),c.Nb(),c.Nb(),c.Nb(),c.Ob(59,"div",3),c.Ob(60,"div",4),c.Ob(61,"mat-form-field",5),c.Ob(62,"mat-label"),c.sc(63,"Max Landmarks"),c.Nb(),c.Ob(64,"textarea",15),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.maxLandmarks=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(65,"div",3),c.Ob(66,"div",4),c.Ob(67,"mat-form-field",5),c.Ob(68,"mat-label"),c.sc(69,"Min Landmarks"),c.Nb(),c.Ob(70,"textarea",16),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.minLandmarks=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(71,"div",3),c.Ob(72,"div",4),c.Ob(73,"mat-form-field",5),c.Ob(74,"mat-label"),c.sc(75,"Hirelings"),c.Nb(),c.Ob(76,"textarea",17),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.hirelingsNum=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(77,"div",3),c.Ob(78,"div",4),c.Ob(79,"mat-form-field",5),c.Ob(80,"mat-label"),c.sc(81,"Exiles and Partisans Deck Odds"),c.Nb(),c.Ob(82,"textarea",18),c.Vb("keyup",function(){return c.lc(e),c.Zb().gameChange()})("ngModelChange",function(n){return c.lc(e),c.Zb().options.epDeckOdds=n}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()}if(2&e){const e=c.Zb();c.zb(5),c.ec("ngForOf",e.keys(e.getFactions(e.options.outsiders))),c.zb(5),c.ec("ngForOf",e.keys(e.getMaps())),c.zb(5),c.ec("ngForOf",e.keys(e.getLandmarks())),c.zb(5),c.ec("ngForOf",e.keys(e.getBots())),c.zb(5),c.ec("ngForOf",e.keys(e.getClasses())),c.zb(5),c.ec("ngForOf",e.keys(e.getHirelings())),c.zb(6),c.ec("ngModel",e.options.forcedDemoted),c.zb(3),c.ec("ngModel",e.options.forcedPromoted),c.zb(3),c.ec("ngModel",e.options.contrastiveHirelings),c.zb(3),c.ec("ngModel",e.options.alternativeTreetop),c.zb(3),c.ec("ngModel",e.options.ferryMapPriority),c.zb(3),c.ec("ngModel",e.options.towerMapPriority),c.zb(3),c.ec("ngModel",e.options.passLandmarkPriority),c.zb(3),c.ec("ngModel",e.options.looseLock),c.zb(7),c.ec("ngModel",e.options.maxLandmarks)("ngModelOptions",c.fc(22,_)),c.zb(6),c.ec("ngModel",e.options.minLandmarks)("ngModelOptions",c.fc(23,_)),c.zb(6),c.ec("ngModel",e.options.hirelingsNum)("ngModelOptions",c.fc(24,_)),c.zb(6),c.ec("ngModel",e.options.epDeckOdds)("ngModelOptions",c.fc(25,_))}}const z=function(){return["/"]},V=function(){return["/full-game"]},R=[{path:"",component:(()=>{class e{constructor(e,n,t){this.mapService=e,this.rootlogService=n,this.localStorageService=t,this.options=this.localGet(this.default()),this.game=this.mapService.mapSetup(this.options),this.validRootlog=!0,this.gameUrl="",this.validRootlogUrl=!1}localGet(e){const n=e;for(const[o,r]of Object.entries(e)){var t=this.localStorageService.getItem(o);null!==t&&"undefined"!==t&&""!==t&&(n[o]=t)}return n}reset(){this.options=this.default(),this.options.reset=!1,this.gameChange()}True(){return!0}default(){return{players:4,bots:0,extra:!1,reset:!1,hirelings:!1,balanced:!1,outsiders:!1,bannedFactions:this.getFactions(!0),bannedBots:this.getBots(),bannedClasses:this.getClasses(),bannedHirelings:this.getHirelings(),bannedMaps:this.getMaps(),bannedLandmarks:this.getLandmarks(),maxLandmarks:2,minLandmarks:0,epDeckOdds:.9,hirelingsNum:3,forcedDemoted:!1,forcedPromoted:!1,contrastiveHirelings:!1,alternativeTreetop:!0,ferryMapPriority:!0,towerMapPriority:!0,passLandmarkPriority:!0,looseLock:!0}}localSet(e){for(const[n,t]of Object.entries(e))this.localStorageService.setItem(n,t)}gameChange(){this.localSet(this.options),this.game=this.mapService.mapSetup(this.options)}async gameUrlChange(){try{const e=await this.rootlogService.getGameStringFromURLPromise(this.gameUrl);this.validRootlogUrl=this.rootlogService.isValidGame(e)}catch(e){this.validRootlogUrl=!1}}keys(e){return Object.keys(e)}getMaps(){var e={};for(const[t,o]of Object.entries(a.f)){var n={banned:!1};n.properName=o,e[t]=n}return e}getLandmarks(){var e={};for(const[t,o]of Object.entries(a.e)){var n={banned:!1};n.properName=o,e[t]=n}return e}getFactions(e){var n={},t=Object.keys(a.c);e&&(t=t.concat(Object.keys(a.s)));for(const[r,i]of t){var o={};o.name=i,o.banned=!1,o.properName=this.rootlogService.getFactionProperName(r),n[r]=o}return n}getBots(){var e={};for(const[t,o]of Object.entries(a.a)){var n={};n.name=o,n.banned=!1,n.properName=this.rootlogService.getFactionProperName(t),e[t]=n}return e}getClasses(){var e={};for(const[t,o]of Object.entries(a.b)){var n={};n.name=o,n.banned=!1,n.properName=this.rootlogService.getFactionProperName(t),e[t]=n}return e}all(e){var n=0;for(const[o,r]of Object.entries(this.options[e]))n+=this.options[e][o].banned?1:0;var t=n<=Object.keys(this.options[e]).length/2;for(const[o,r]of Object.entries(this.options[e]))this.options[e][o].banned=t;this.gameChange()}getHirelings(){var e={};for(const[t,o]of Object.entries(a.d)){var n={};n.name=o,n.banned=!1,n.properName=this.rootlogService.getFactionProperName(t).split(",")[0],e[t]=n}return e}getURLParams(){const e={};return this.game&&(e.game=this.getEncodedGame()),this.gameUrl&&(e.gameUrl=this.gameUrl),e}getEncodedGame(){return this.game?Object(i.compressToEncodedURIComponent)(this.game):""}}return e.\u0275fac=function(n){return new(n||e)(c.Jb(O),c.Jb(l.a),c.Jb(v))},e.\u0275cmp=c.Db({type:e,selectors:[["app-input"]],decls:34,vars:17,consts:[["color","primary",3,"routerLink"],[3,"click"],[1,"container"],[1,"row"],[1,"col"],["appearance","outline","color","accent"],["matInput","","placeholder","Enter # of players here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter # of bots here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[1,"row-check"],[1,"row-col"],[3,"ngModel","change","ngModelChange"],[4,"ngIf"],["mat-flat-button","","color","primary",3,"routerLink","queryParams","disabled"],[1,"center"],["class","row-col",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter max # of landmarks here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter min # of landmarks here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter # of Hirelings here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matInput","","placeholder","Enter Exiles and Partisans Deck Odds here...",1,"input-game",3,"ngModel","ngModelOptions","keyup","ngModelChange"]],template:function(e,n){1&e&&(c.Ob(0,"mat-toolbar",0),c.Ob(1,"span",1),c.Vb("click",function(){return n.reset()}),c.sc(2,"Root Map Setup"),c.Nb(),c.Nb(),c.Ob(3,"div",2),c.Ob(4,"div",3),c.Ob(5,"div",4),c.Ob(6,"mat-form-field",5),c.Ob(7,"mat-label"),c.sc(8,"Players"),c.Nb(),c.Ob(9,"textarea",6),c.Vb("keyup",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.players=e}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(10,"div",3),c.Ob(11,"div",4),c.Ob(12,"mat-form-field",5),c.Ob(13,"mat-label"),c.sc(14,"Bots"),c.Nb(),c.Ob(15,"textarea",7),c.Vb("keyup",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.bots=e}),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(16,"div",8),c.Ob(17,"div",9),c.Ob(18,"mat-checkbox",10),c.Vb("change",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.hirelings=e}),c.sc(19," Hirelings?"),c.Nb(),c.Nb(),c.Ob(20,"div",9),c.Ob(21,"mat-checkbox",10),c.Vb("change",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.balanced=e}),c.sc(22," Balanced Clearings?"),c.Nb(),c.Nb(),c.Ob(23,"div",9),c.Ob(24,"mat-checkbox",10),c.Vb("change",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.outsiders=e}),c.sc(25," Outsiders Expansion?"),c.Nb(),c.Nb(),c.Ob(26,"div",9),c.Ob(27,"mat-checkbox",10),c.Vb("change",function(){return n.gameChange()})("ngModelChange",function(e){return n.options.extra=e}),c.sc(28," Extra Settings?"),c.Nb(),c.Nb(),c.Nb(),c.rc(29,F,83,26,"div",11),c.Ob(30,"div",3),c.Ob(31,"div",4),c.Ob(32,"button",12),c.sc(33,"Generate Map"),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.ec("routerLink",c.fc(13,z)),c.zb(9),c.ec("ngModel",n.options.players)("ngModelOptions",c.fc(14,_)),c.zb(6),c.ec("ngModel",n.options.bots)("ngModelOptions",c.fc(15,_)),c.zb(3),c.ec("ngModel",n.options.hirelings),c.zb(3),c.ec("ngModel",n.options.balanced),c.zb(3),c.ec("ngModel",n.options.outsiders),c.zb(3),c.ec("ngModel",n.options.extra),c.zb(2),c.ec("ngIf",n.options.extra),c.zb(3),c.ec("routerLink",c.fc(16,V))("queryParams",n.getURLParams())("disabled",!n.validRootlog&&!n.validRootlogUrl))},directives:[M.a,r.c,N.b,N.e,k.a,C.b,C.h,C.j,y.a,o.l,P.a,o.k],styles:[".container[_ngcontent-%COMP%]{padding:10px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .row-check[_ngcontent-%COMP%]{margin-left:20%;margin-right:20%}.container[_ngcontent-%COMP%]   .row-check[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.container[_ngcontent-%COMP%]   .row-check[_ngcontent-%COMP%]   .row-col[_ngcontent-%COMP%]{min-width:200px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:20px}button[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}.row[_ngcontent-%COMP%], .row-check[_ngcontent-%COMP%]{margin-top:20px}textarea[_ngcontent-%COMP%]{height:20px;max-height:20px}"]}),e})()}];let H=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(n){return new(n||e)},imports:[[r.d.forChild(R)],r.d]}),e})();var B=t("d2mR");let D=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(n){return new(n||e)},imports:[[o.c,C.d,H,B.a]]}),e})()}}]);